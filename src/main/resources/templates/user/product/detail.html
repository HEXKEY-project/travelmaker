<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title th:text="${product.productName}"></title>
    <link rel="stylesheet" type="text/css" href="/user/css/product/detail.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="/user/js/product/detail.js" type="text/javascript"></script>

</head>
<body>
<div id="wrapper">
    <div th:replace="common/user/header.html"></div>
    <div id="product_contents">
        <div id="titleImgArea">
            <div id="thumbnailArea"></div>
            <img id="leftButtonImg" src="/user/images/productdetail/_ButtonBase_left.png" alt="이전이미지"
                 onclick="showPreviousImage()">
            <img id="rightButtonImg" src="/user/images/productdetail/_ButtonBase_right.png" alt="다음이미지"
                 onclick="showNextImage()">
        </div>
        <div id="product_info">
            <div id="product_title" th:text="${product.productName}"></div>
            <div id="product_price" th:text="'₩ ' + ${product.price}"></div>
            <div id="optContent">
                <div id="option">
                    <span th:text="${product.getProductOption().get(0).getOptionName()}"></span>
                    <select id="productOpt">
                        <option selected
                                th:text="'-[필수] ' + ${product.getProductOption().get(0).getOptionName() + ' 선택-'} ">
                        </option>
                        <option disabled>-----------------</option>
                        <option disabled id="optKind"
                                th:text="${product.getProductOption().get(0).getOptionName()}"></option>
                        <th:block th:each="optName : ${ #numbers.sequence(1, product.productOption.size() - 1)}">
                            <option th:text="'&nbsp;&nbsp;' + ${product.getProductOption().get(optName).getOptionName()}"
                                    th:name="${product.getProductOption().get(optName).getOptionName()}"
                                    th:value="${product.getProductOption().get(optName).getOptionName()}">
                            </option>
                        </th:block>
                    </select>
                    <img id="iconArrow" src="/user/images/productdetail/iconArrow.png">
                </div>
            </div>
            <div id="optAddLine">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M9.99935 5.83329C10.4577 5.83329 10.8327 6.20829 10.8327 6.66663V9.99996C10.8327 10.4583 10.4577 10.8333 9.99935 10.8333C9.54102 10.8333 9.16602 10.4583 9.16602 9.99996V6.66663C9.16602 6.20829 9.54102 5.83329 9.99935 5.83329ZM9.99102 1.66663C5.39102 1.66663 1.66602 5.39996 1.66602 9.99996C1.66602 14.6 5.39102 18.3333 9.99102 18.3333C14.5993 18.3333 18.3327 14.6 18.3327 9.99996C18.3327 5.39996 14.5993 1.66663 9.99102 1.66663ZM9.99935 16.6666C6.31602 16.6666 3.33268 13.6833 3.33268 9.99996C3.33268 6.31663 6.31602 3.33329 9.99935 3.33329C13.6827 3.33329 16.666 6.31663 16.666 9.99996C16.666 13.6833 13.6827 16.6666 9.99935 16.6666ZM10.8327 14.1666H9.16602V12.5H10.8327V14.1666Z"
                          fill="#323232"/>
                </svg>
                <div id="optAddLineContent">위 옵션선택 박스를 선택하시면 아래에 상품이 추가됩니다.</div>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" width="560" height="2" viewBox="0 0 560 2" fill="none">
                <path d="M0 1H560" stroke="#BDBDBD"/>
            </svg>
            <div id="addOpt"><!--<span th:text="${ product.productName }"></span>
                <input type="number" id="productCount" min="1" step="1">-->
            </div>
            <div id="payInfo">
                <div>아래 <span>구매하기</span> 버튼을 통해 결제페이지에서</div>
                <div>상품별 적립금을 적용할 수 있습니다</div>
            </div>
            <div id="BtnArea">
                <button type="submit" id="basketBtn">장바구니</button>
                <button type="button" id="BuyBtn">구매하기</button>
            </div>

        </div>

    </div>
    <div id="smallImgArea">
        <th:block th:if="${ product.fileList.size() > 1}"
                  th:each="index : ${ #numbers.sequence(0, product.fileList.size() - 1)}"
        >
            <img class="thumbnailImg" th:if="${ product.getFileList().get(index).getFileType() == 'productImage'}"
                 th:src="${ product.fileList[index].filePath }">
        </th:block>
    </div>
    <div id="productContentWrapper">
        <div id="productDetail">DETAIL</div>
        <div id="productReview">REVIEW</div>
        <div id="productQnA">Q&A</div>
    </div>
    <div id="productContentImg">
        <th:block th:if="${ product.fileList.size() > 1}"
                  th:each="index : ${ #numbers.sequence(0, product.fileList.size() - 1)}"
        >
            <div class="contentImg"><img th:if="${ product.getFileList().get(index).getFileType() == 'productContent'}"
                 th:src="${ product.fileList[index].filePath }"></div>
        </th:block>
    </div>
    <div th:replace="common/user/footer.html"></div>
</div>

<script>
    // 현재 보이는 이미지의 인덱스를 추적하는 변수
    let currentImageIndex = 0;

    // 이미지 요소들을 가져옵니다.
    const thumbnailImages = document.querySelectorAll('.thumbnailImg');
    const thumbnailArea = document.getElementById('thumbnailArea');

    function showPreviousImage() {
        if (currentImageIndex > 0) {
            currentImageIndex--; // 이전 이미지 인덱스로 이동
            thumbnailArea.innerHTML = `<img src="${thumbnailImages[currentImageIndex].src}" alt="상세 이미지" style="width: 706px; height: 695px; flex-shrink: 0;">`;
        }
    }

    function showNextImage() {
        if (currentImageIndex < thumbnailImages.length - 1) {
            currentImageIndex++; // 다음 이미지 인덱스로 이동
            thumbnailArea.innerHTML = `<img src="${thumbnailImages[currentImageIndex].src}" alt="상세 이미지" style="width: 706px; height: 695px; flex-shrink: 0;">`;
        }
    }

</script>

</body>
</html>